YUI.add('moodle-theme_cleanudem-blockhider',function(Y){var blockhider=function(){blockhider.superclass.constructor.apply(this,arguments)};blockhider.prototype={initializer:function(config){this.set('block','#'+this.get('id'));var b=this.get('block'),c=b.one('.content'),t=b.one('.title'),a=null,hide,show;if(t&&(a=t.one('.block_action'))&&!a.one('img')&&!t.hasClass('ui-mobile-title')){hide=Y.Node.create('<img />').addClass('block-hider-hide').setAttrs({alt:config.tooltipVisible,src:this.get('iconVisible'),tabindex:0,title:config.tooltipVisible});hide.on('keypress',this.updateStateKey,this,true);hide.on('click',this.updateState,this,true);show=Y.Node.create('<img />').addClass('block-hider-show').setAttrs({alt:config.tooltipHidden,src:this.get('iconHidden'),tabindex:0,title:config.tooltipHidden});show.on('keypress',this.updateStateKey,this,false);show.on('click',this.updateState,this,false);t.on('dblclick',this.updateState,this);a.insert(show,0).insert(hide,0)};c.setStyle('overflow','hidden');var anim=new Y.Anim({node:b.one('.content'),from:{opacity:0,height:0},to:{opacity:1,height:function(node){var p1=parseFloat(node.getComputedStyle('paddingTop').replace(/[A-Za-z$-]/g,"")),p2=parseFloat(node.getComputedStyle('paddingBottom').replace(/[A-Za-z$-]/g,""));return(node.get('scrollHeight')-p1-p2)}},easing:Y.Easing.easeOut,duration:0.2});anim.on('end',function(e,a,b,c){c.setStyle('display','');if(b.hasClass('hidden')&&!b.get('parentNode').get('parentNode').hasClass('has_dock')){c.setStyle('height','0');c.setStyle('opacity','0')}else{c.setStyle('height','');c.setStyle('opacity','')}},anim,a,b,c);this.set('anim',anim)},updateState:function(e,hide){e.preventDefault();this.clearSelection();var a=this.get('anim'),b=this.get('block'),c=b.one('.content'),t=b.one('.title');if(hide==null){hide=!b.hasClass('hidden');t.blur()};M.util.set_user_preference(this.get('preference'),hide);c.setStyle('display','block');b.toggleClass('hidden');a.set('reverse',hide);a.run();e.stopPropagation()},clearSelection:function(){if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){var sel=window.getSelection();sel.removeAllRanges()}},updateStateKey:function(e,hide){if(e.keyCode==13)this.updateState(this,hide)}};Y.extend(blockhider,Y.Base,blockhider.prototype,{NAME:'Clean UdeM blockhider',ATTRS:{id:{},preference:{},iconVisible:{value:M.util.image_url('t/switch_minus_white','moodle')},iconHidden:{value:M.util.image_url('t/switch_plus_white','moodle')},block:{setter:function(node){return Y.one(node)}}}});M.theme_cleanudem=M.theme_cleanudem||{};M.theme_cleanudem.init_block_hider=function(config){return new blockhider(config)}},'@VERSION@',{requires:['base','node','anim']});
YUI.add('moodle-theme_cleanudem-navdropdownbehavior',function(Y){var navdropdownbehavior=function(){navdropdownbehavior.superclass.constructor.apply(this,arguments)};navdropdownbehavior.prototype={initializer:function(){if(Y.one('header.navbar-fixed-top').hasClass('default-device')){this.matchMediaPolyfill();var mql=window.matchMedia('all and (max-width: 979px)');this.handleMatchMedia(mql);if(mql.addListener){mql.addListener(this.handleMatchMedia)}else Y.on('windowresize',this.handleMatchMedia,window,this,mql)}},handleMatchMedia:function(mediaQuery){mediaQuery=window.matchMedia('all and (max-width: 979px)');var dropdowntoggle=Y.all('.default-device .nav li.dropdown > .dropdown-toggle');if(mediaQuery.matches){dropdowntoggle.setAttribute('data-toggle','dropdown')}else dropdowntoggle.setAttribute('data-toggle','')},matchMediaPolyfill:function(){window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=(window.styleMedia||window.media);return function(media){return{matches:styleMedia.matchMedium(media||'all'),media:media||'all'}}}())}};Y.extend(navdropdownbehavior,Y.Base,navdropdownbehavior.prototype,{NAME:'Clean UdeM theme navigation dropdown behavior',ATTRS:{}});M.theme_cleanudem=M.theme_cleanudem||{};M.theme_cleanudem.init_nav_dropdown_behavior=function(config){return new navdropdownbehavior(config)}},'@VERSION@',{requires:['base','node','event-resize']});
YUI.add('moodle-theme_cleanudem-fullscreenmode',function(Y){var CSS={COLLAPSED:'cleanudem-collapsed'},SELECTORS={FULLSCREEN_BUTTON:'.fullscreen-toggle-btn'},fullscreenmode=function(){fullscreenmode.superclass.constructor.apply(this,arguments)};fullscreenmode.prototype={fadeanim:null,initializer:function(config){var PROPERTIES={DELAY:7500};if((btn=Y.one(SELECTORS.FULLSCREEN_BUTTON))&&config.disableurl){btn.on('click',this.setFullscreenModeState,this,config.disableurl);if(Y.one(document.body).hasClass('cleanudem-collapsed'))if(window.location.search.indexOf('notifyeditingon=1')>-1){Y.later(PROPERTIES.DELAY,this,function(){this.show_fullscreen_div(config.disableurl)},null,false)}else this.show_fullscreen_div(config.disableurl)}},setFullscreenModeState:function(e,url){e.preventDefault();var body=Y.one(document.body);body.toggleClass(CSS.COLLAPSED);var state=body.hasClass(CSS.COLLAPSED),btn=Y.one(SELECTORS.FULLSCREEN_BUTTON);if(state){btn.setAttribute('title',M.str.theme_cleanudem.disablefullscreenmode);this.show_fullscreen_div(url)}else{btn.setAttribute('title',M.str.theme_cleanudem.enablefullscreenmode);this.hide_fullscreen_div()};if(Y.UA.ie===0||Y.UA.ie>8)Y.one('window').simulate('resize');M.util.set_user_preference('theme_cleanudem_fullscreenmode_state',state)},show_fullscreen_div:function(url){var CSS={FULLSCREEN_STATUS:'fullscreen-status',FULLSCREEN_CLASSES:'alert alert-info'},SELECTORS={FULLSCREEN_STATUS_ID:'#'+CSS.FULLSCREEN_STATUS},PROPERTIES={DISPLAY_TIME:5e3,ANIM_DURATION:0.5},coursecontents=document.getElementById('page');if(!coursecontents)return;if(Y.one(SELECTORS.FULLSCREEN_STATUS_ID)){var statusbox=Y.one(SELECTORS.FULLSCREEN_STATUS_ID)}else{var statusbox=document.createElement('div');statusbox.id=CSS.FULLSCREEN_STATUS;coursecontents.insertBefore(statusbox,coursecontents.firstChild);statusbox=Y.one(statusbox);statusbox.setStyle('top','0px');statusbox.setStyle('opacity','0');statusbox.append(M.str.theme_cleanudem.fullscreenactivated);var disablelink=statusbox.appendChild('<a></a>');disablelink.setAttribute('href',url);disablelink.setHTML(M.str.theme_cleanudem.disablefullscreenmode);disablelink.on('click',this.setFullscreenModeState,this,url)};if(this.fadeanim){this.fadeanim.stop();this.fadeanim.detachAll();this.fadeanim.destroy()};this.fadeanim=new Y.Anim({node:SELECTORS.FULLSCREEN_STATUS_ID,to:{opacity:1.0,top:'60px'},duration:PROPERTIES.ANIM_DURATION});this.fadeanim.once('end',function(){Y.later(PROPERTIES.DISPLAY_TIME,this,function(){this.hide_fullscreen_div()},null,false)},this);this.fadeanim.run()},hide_fullscreen_div:function(){var CSS={FULLSCREEN_STATUS:'fullscreen-status'},SELECTORS={FULLSCREEN_STATUS_ID:'#'+CSS.FULLSCREEN_STATUS},PROPERTIES={ANIM_DURATION:0.5};if(this.fadeanim){this.fadeanim.stop();this.fadeanim.detachAll();this.fadeanim.destroy()};if(Y.one(SELECTORS.FULLSCREEN_STATUS_ID)){var statusbox=Y.one(SELECTORS.FULLSCREEN_STATUS_ID);this.fadeanim=new Y.Anim({node:SELECTORS.FULLSCREEN_STATUS_ID,to:{opacity:0.0,top:'0px'},duration:PROPERTIES.ANIM_DURATION});this.fadeanim.once('end',function(){this.detachAll();this.destroy()});this.fadeanim.run()}}};Y.extend(fullscreenmode,Y.Base,fullscreenmode.prototype,{NAME:'Clean UdeM theme fullscreen mode',ATTRS:{state:{value:0}}});M.theme_cleanudem=M.theme_cleanudem||{};M.theme_cleanudem.initFullscreenMode=function(cfg){return new fullscreenmode(cfg)}},'@VERSION@',{requires:['base','node','anim','node-event-simulate']})